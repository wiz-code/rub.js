{"version":3,"sources":["webpack://Rub/webpack/universalModuleDefinition","webpack://Rub/./node_modules/javascript-state-machine/lib/state-machine.js","webpack://Rub/./src/dataset.ts","webpack://Rub/./src/event-type.ts","webpack://Rub/./src/index.ts","webpack://Rub/./src/mouse-handler.ts","webpack://Rub/./src/pointer-handler.ts","webpack://Rub/./src/recorder.ts","webpack://Rub/./src/target.ts","webpack://Rub/./src/touch-handler.ts","webpack://Rub/./src/tracker.ts","webpack://Rub/webpack/bootstrap","webpack://Rub/webpack/runtime/compat get default export","webpack://Rub/webpack/runtime/define property getters","webpack://Rub/webpack/runtime/hasOwnProperty shorthand","webpack://Rub/webpack/runtime/make namespace object","webpack://Rub/webpack/startup"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;ACVA;AACA,IAAI,IAAyD;AAC7D;AACA,MAAM,EAK6B;AACnC,CAAC;AACD,oCAAoC;AACpC;AACA;AACA;AACA;AACA,mBAAmB,8BAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,8BAAmB;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,8BAAmB;AAC7B;AACA;AACA,UAAU,8BAAmB;AAC7B;AACA;AACA,UAAU,8BAAmB,sBAAsB,cAAc;AACjE;AACA;AACA,UAAU,8BAAmB;AAC7B,eAAe,8BAAmB;AAClC;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,UAAU,8BAAmB;AAC7B;AACA,mCAAmC,0BAA0B,EAAE;AAC/D,yCAAyC,eAAe;AACxD,WAAW,8BAAmB;AAC9B;AACA;AACA;AACA;AACA,UAAU,8BAAmB,iCAAiC,+DAA+D;AAC7H;AACA;AACA,UAAU,8BAAmB;AAC7B;AACA;AACA,iBAAiB,8BAAmB,CAAC,8BAAmB;AACxD,UAAU;AACV;AACA;AACA;AACA,iCAAiC,+BAAmB;;AAEpD;;;AAGA;AACA;AACA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA,iCAAiC,+BAAmB;;AAEpD;;;AAGA;;AAEA,YAAY,+BAAmB;;AAE/B;;AAEA;;AAEA;AACA;AACA,qCAAqC,UAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qCAAqC,UAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA,iCAAiC,+BAAmB;;AAEpD;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,mBAAmB;AAChC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA,iCAAiC,+BAAmB;;AAEpD;;;AAGA;;AAEA,eAAe,+BAAmB;AAClC,eAAe,+BAAmB;;AAElC;;AAEA;;AAEA;;AAEA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,iBAAiB,mCAAmC;AACpD,iBAAiB,mCAAmC;AACpD,iBAAiB,mCAAmC;AACpD,iBAAiB,mCAAmC;AACpD,iBAAiB;AACjB;AACA,GAAG;;AAEH;AACA;AACA,wCAAwC,uBAAuB,yBAAyB;AACxF;AACA;AACA,wCAAwC,6BAA6B,eAAe;AACpF;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,yBAAyB,aAAa;AACtC;AACA,yBAAyB,WAAW;AACpC,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,qCAAqC,UAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,eAAe,yBAAyB;AACxC;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC,4BAA4B,+CAA+C;AAC3E;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA,iCAAiC,gCAAmB;;;AAGpD,iBAAiB,gCAAmB;AACpC,iBAAiB,gCAAmB;AACpC,iBAAiB,gCAAmB;AACpC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AA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","file":"rub.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Rub\"] = factory();\n\telse\n\t\troot[\"Rub\"] = factory();\n})(self, function() {\nreturn ","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"StateMachine\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StateMachine\"] = factory();\n\telse\n\t\troot[\"StateMachine\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function(target, sources) {\n  var n, source, key;\n  for(n = 1 ; n < arguments.length ; n++) {\n    source = arguments[n];\n    for(key in source) {\n      if (source.hasOwnProperty(key))\n        target[key] = source[key];\n    }\n  }\n  return target;\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nvar mixin = __webpack_require__(0);\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = {\n\n  build: function(target, config) {\n    var n, max, plugin, plugins = config.plugins;\n    for(n = 0, max = plugins.length ; n < max ; n++) {\n      plugin = plugins[n];\n      if (plugin.methods)\n        mixin(target, plugin.methods);\n      if (plugin.properties)\n        Object.defineProperties(target, plugin.properties);\n    }\n  },\n\n  hook: function(fsm, name, additional) {\n    var n, max, method, plugin,\n        plugins = fsm.config.plugins,\n        args    = [fsm.context];\n\n    if (additional)\n      args = args.concat(additional)\n\n    for(n = 0, max = plugins.length ; n < max ; n++) {\n      plugin = plugins[n]\n      method = plugins[n][name]\n      if (method)\n        method.apply(plugin, args);\n    }\n  }\n\n}\n\n//-------------------------------------------------------------------------------------------------\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nfunction camelize(label) {\n\n  if (label.length === 0)\n    return label;\n\n  var n, result, word, words = label.split(/[_-]/);\n\n  // single word with first character already lowercase, return untouched\n  if ((words.length === 1) && (words[0][0].toLowerCase() === words[0][0]))\n    return label;\n\n  result = words[0].toLowerCase();\n  for(n = 1 ; n < words.length ; n++) {\n    result = result + words[n].charAt(0).toUpperCase() + words[n].substring(1).toLowerCase();\n  }\n\n  return result;\n}\n\n//-------------------------------------------------------------------------------------------------\n\ncamelize.prepended = function(prepend, label) {\n  label = camelize(label);\n  return prepend + label[0].toUpperCase() + label.substring(1);\n}\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = camelize;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nvar mixin    = __webpack_require__(0),\n    camelize = __webpack_require__(2);\n\n//-------------------------------------------------------------------------------------------------\n\nfunction Config(options, StateMachine) {\n\n  options = options || {};\n\n  this.options     = options; // preserving original options can be useful (e.g visualize plugin)\n  this.defaults    = StateMachine.defaults;\n  this.states      = [];\n  this.transitions = [];\n  this.map         = {};\n  this.lifecycle   = this.configureLifecycle();\n  this.init        = this.configureInitTransition(options.init);\n  this.data        = this.configureData(options.data);\n  this.methods     = this.configureMethods(options.methods);\n\n  this.map[this.defaults.wildcard] = {};\n\n  this.configureTransitions(options.transitions || []);\n\n  this.plugins = this.configurePlugins(options.plugins, StateMachine.plugin);\n\n}\n\n//-------------------------------------------------------------------------------------------------\n\nmixin(Config.prototype, {\n\n  addState: function(name) {\n    if (!this.map[name]) {\n      this.states.push(name);\n      this.addStateLifecycleNames(name);\n      this.map[name] = {};\n    }\n  },\n\n  addStateLifecycleNames: function(name) {\n    this.lifecycle.onEnter[name] = camelize.prepended('onEnter', name);\n    this.lifecycle.onLeave[name] = camelize.prepended('onLeave', name);\n    this.lifecycle.on[name]      = camelize.prepended('on',      name);\n  },\n\n  addTransition: function(name) {\n    if (this.transitions.indexOf(name) < 0) {\n      this.transitions.push(name);\n      this.addTransitionLifecycleNames(name);\n    }\n  },\n\n  addTransitionLifecycleNames: function(name) {\n    this.lifecycle.onBefore[name] = camelize.prepended('onBefore', name);\n    this.lifecycle.onAfter[name]  = camelize.prepended('onAfter',  name);\n    this.lifecycle.on[name]       = camelize.prepended('on',       name);\n  },\n\n  mapTransition: function(transition) {\n    var name = transition.name,\n        from = transition.from,\n        to   = transition.to;\n    this.addState(from);\n    if (typeof to !== 'function')\n      this.addState(to);\n    this.addTransition(name);\n    this.map[from][name] = transition;\n    return transition;\n  },\n\n  configureLifecycle: function() {\n    return {\n      onBefore: { transition: 'onBeforeTransition' },\n      onAfter:  { transition: 'onAfterTransition'  },\n      onEnter:  { state:      'onEnterState'       },\n      onLeave:  { state:      'onLeaveState'       },\n      on:       { transition: 'onTransition'       }\n    };\n  },\n\n  configureInitTransition: function(init) {\n    if (typeof init === 'string') {\n      return this.mapTransition(mixin({}, this.defaults.init, { to: init, active: true }));\n    }\n    else if (typeof init === 'object') {\n      return this.mapTransition(mixin({}, this.defaults.init, init, { active: true }));\n    }\n    else {\n      this.addState(this.defaults.init.from);\n      return this.defaults.init;\n    }\n  },\n\n  configureData: function(data) {\n    if (typeof data === 'function')\n      return data;\n    else if (typeof data === 'object')\n      return function() { return data; }\n    else\n      return function() { return {};  }\n  },\n\n  configureMethods: function(methods) {\n    return methods || {};\n  },\n\n  configurePlugins: function(plugins, builtin) {\n    plugins = plugins || [];\n    var n, max, plugin;\n    for(n = 0, max = plugins.length ; n < max ; n++) {\n      plugin = plugins[n];\n      if (typeof plugin === 'function')\n        plugins[n] = plugin = plugin()\n      if (plugin.configure)\n        plugin.configure(this);\n    }\n    return plugins\n  },\n\n  configureTransitions: function(transitions) {\n    var i, n, transition, from, to, wildcard = this.defaults.wildcard;\n    for(n = 0 ; n < transitions.length ; n++) {\n      transition = transitions[n];\n      from  = Array.isArray(transition.from) ? transition.from : [transition.from || wildcard]\n      to    = transition.to || wildcard;\n      for(i = 0 ; i < from.length ; i++) {\n        this.mapTransition({ name: transition.name, from: from[i], to: to });\n      }\n    }\n  },\n\n  transitionFor: function(state, transition) {\n    var wildcard = this.defaults.wildcard;\n    return this.map[state][transition] ||\n           this.map[wildcard][transition];\n  },\n\n  transitionsFor: function(state) {\n    var wildcard = this.defaults.wildcard;\n    return Object.keys(this.map[state]).concat(Object.keys(this.map[wildcard]));\n  },\n\n  allStates: function() {\n    return this.states;\n  },\n\n  allTransitions: function() {\n    return this.transitions;\n  }\n\n});\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = Config;\n\n//-------------------------------------------------------------------------------------------------\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar mixin      = __webpack_require__(0),\n    Exception  = __webpack_require__(6),\n    plugin     = __webpack_require__(1),\n    UNOBSERVED = [ null, [] ];\n\n//-------------------------------------------------------------------------------------------------\n\nfunction JSM(context, config) {\n  this.context   = context;\n  this.config    = config;\n  this.state     = config.init.from;\n  this.observers = [context];\n}\n\n//-------------------------------------------------------------------------------------------------\n\nmixin(JSM.prototype, {\n\n  init: function(args) {\n    mixin(this.context, this.config.data.apply(this.context, args));\n    plugin.hook(this, 'init');\n    if (this.config.init.active)\n      return this.fire(this.config.init.name, []);\n  },\n\n  is: function(state) {\n    return Array.isArray(state) ? (state.indexOf(this.state) >= 0) : (this.state === state);\n  },\n\n  isPending: function() {\n    return this.pending;\n  },\n\n  can: function(transition) {\n    return !this.isPending() && !!this.seek(transition);\n  },\n\n  cannot: function(transition) {\n    return !this.can(transition);\n  },\n\n  allStates: function() {\n    return this.config.allStates();\n  },\n\n  allTransitions: function() {\n    return this.config.allTransitions();\n  },\n\n  transitions: function() {\n    return this.config.transitionsFor(this.state);\n  },\n\n  seek: function(transition, args) {\n    var wildcard = this.config.defaults.wildcard,\n        entry    = this.config.transitionFor(this.state, transition),\n        to       = entry && entry.to;\n    if (typeof to === 'function')\n      return to.apply(this.context, args);\n    else if (to === wildcard)\n      return this.state\n    else\n      return to\n  },\n\n  fire: function(transition, args) {\n    return this.transit(transition, this.state, this.seek(transition, args), args);\n  },\n\n  transit: function(transition, from, to, args) {\n\n    var lifecycle = this.config.lifecycle,\n        changed   = this.config.options.observeUnchangedState || (from !== to);\n\n    if (!to)\n      return this.context.onInvalidTransition(transition, from, to);\n\n    if (this.isPending())\n      return this.context.onPendingTransition(transition, from, to);\n\n    this.config.addState(to);  // might need to add this state if it's unknown (e.g. conditional transition or goto)\n\n    this.beginTransit();\n\n    args.unshift({             // this context will be passed to each lifecycle event observer\n      transition: transition,\n      from:       from,\n      to:         to,\n      fsm:        this.context\n    });\n\n    return this.observeEvents([\n                this.observersForEvent(lifecycle.onBefore.transition),\n                this.observersForEvent(lifecycle.onBefore[transition]),\n      changed ? this.observersForEvent(lifecycle.onLeave.state) : UNOBSERVED,\n      changed ? this.observersForEvent(lifecycle.onLeave[from]) : UNOBSERVED,\n                this.observersForEvent(lifecycle.on.transition),\n      changed ? [ 'doTransit', [ this ] ]                       : UNOBSERVED,\n      changed ? this.observersForEvent(lifecycle.onEnter.state) : UNOBSERVED,\n      changed ? this.observersForEvent(lifecycle.onEnter[to])   : UNOBSERVED,\n      changed ? this.observersForEvent(lifecycle.on[to])        : UNOBSERVED,\n                this.observersForEvent(lifecycle.onAfter.transition),\n                this.observersForEvent(lifecycle.onAfter[transition]),\n                this.observersForEvent(lifecycle.on[transition])\n    ], args);\n  },\n\n  beginTransit: function()          { this.pending = true;                 },\n  endTransit:   function(result)    { this.pending = false; return result; },\n  failTransit:  function(result)    { this.pending = false; throw result;  },\n  doTransit:    function(lifecycle) { this.state = lifecycle.to;           },\n\n  observe: function(args) {\n    if (args.length === 2) {\n      var observer = {};\n      observer[args[0]] = args[1];\n      this.observers.push(observer);\n    }\n    else {\n      this.observers.push(args[0]);\n    }\n  },\n\n  observersForEvent: function(event) { // TODO: this could be cached\n    var n = 0, max = this.observers.length, observer, result = [];\n    for( ; n < max ; n++) {\n      observer = this.observers[n];\n      if (observer[event])\n        result.push(observer);\n    }\n    return [ event, result, true ]\n  },\n\n  observeEvents: function(events, args, previousEvent, previousResult) {\n    if (events.length === 0) {\n      return this.endTransit(previousResult === undefined ? true : previousResult);\n    }\n\n    var event     = events[0][0],\n        observers = events[0][1],\n        pluggable = events[0][2];\n\n    args[0].event = event;\n    if (event && pluggable && event !== previousEvent)\n      plugin.hook(this, 'lifecycle', args);\n\n    if (observers.length === 0) {\n      events.shift();\n      return this.observeEvents(events, args, event, previousResult);\n    }\n    else {\n      var observer = observers.shift(),\n          result = observer[event].apply(observer, args);\n      if (result && typeof result.then === 'function') {\n        return result.then(this.observeEvents.bind(this, events, args, event))\n                     .catch(this.failTransit.bind(this))\n      }\n      else if (result === false) {\n        return this.endTransit(false);\n      }\n      else {\n        return this.observeEvents(events, args, event, result);\n      }\n    }\n  },\n\n  onInvalidTransition: function(transition, from, to) {\n    throw new Exception(\"transition is invalid in current state\", transition, from, to, this.state);\n  },\n\n  onPendingTransition: function(transition, from, to) {\n    throw new Exception(\"transition is invalid while previous transition is still in progress\", transition, from, to, this.state);\n  }\n\n});\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = JSM;\n\n//-------------------------------------------------------------------------------------------------\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-----------------------------------------------------------------------------------------------\n\nvar mixin    = __webpack_require__(0),\n    camelize = __webpack_require__(2),\n    plugin   = __webpack_require__(1),\n    Config   = __webpack_require__(3),\n    JSM      = __webpack_require__(4);\n\n//-----------------------------------------------------------------------------------------------\n\nvar PublicMethods = {\n  is:                  function(state)       { return this._fsm.is(state)                                     },\n  can:                 function(transition)  { return this._fsm.can(transition)                               },\n  cannot:              function(transition)  { return this._fsm.cannot(transition)                            },\n  observe:             function()            { return this._fsm.observe(arguments)                            },\n  transitions:         function()            { return this._fsm.transitions()                                 },\n  allTransitions:      function()            { return this._fsm.allTransitions()                              },\n  allStates:           function()            { return this._fsm.allStates()                                   },\n  onInvalidTransition: function(t, from, to) { return this._fsm.onInvalidTransition(t, from, to)              },\n  onPendingTransition: function(t, from, to) { return this._fsm.onPendingTransition(t, from, to)              },\n}\n\nvar PublicProperties = {\n  state: {\n    configurable: false,\n    enumerable:   true,\n    get: function() {\n      return this._fsm.state;\n    },\n    set: function(state) {\n      throw Error('use transitions to change state')\n    }\n  }\n}\n\n//-----------------------------------------------------------------------------------------------\n\nfunction StateMachine(options) {\n  return apply(this || {}, options);\n}\n\nfunction factory() {\n  var cstor, options;\n  if (typeof arguments[0] === 'function') {\n    cstor   = arguments[0];\n    options = arguments[1] || {};\n  }\n  else {\n    cstor   = function() { this._fsm.apply(this, arguments) };\n    options = arguments[0] || {};\n  }\n  var config = new Config(options, StateMachine);\n  build(cstor.prototype, config);\n  cstor.prototype._fsm.config = config; // convenience access to shared config without needing an instance\n  return cstor;\n}\n\n//-------------------------------------------------------------------------------------------------\n\nfunction apply(instance, options) {\n  var config = new Config(options, StateMachine);\n  build(instance, config);\n  instance._fsm();\n  return instance;\n}\n\nfunction build(target, config) {\n  if ((typeof target !== 'object') || Array.isArray(target))\n    throw Error('StateMachine can only be applied to objects');\n  plugin.build(target, config);\n  Object.defineProperties(target, PublicProperties);\n  mixin(target, PublicMethods);\n  mixin(target, config.methods);\n  config.allTransitions().forEach(function(transition) {\n    target[camelize(transition)] = function() {\n      return this._fsm.fire(transition, [].slice.call(arguments))\n    }\n  });\n  target._fsm = function() {\n    this._fsm = new JSM(this, config);\n    this._fsm.init(arguments);\n  }\n}\n\n//-----------------------------------------------------------------------------------------------\n\nStateMachine.version  = '3.0.1';\nStateMachine.factory  = factory;\nStateMachine.apply    = apply;\nStateMachine.defaults = {\n  wildcard: '*',\n  init: {\n    name: 'init',\n    from: 'none'\n  }\n}\n\n//===============================================================================================\n\nmodule.exports = StateMachine;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function(message, transition, from, to, current) {\n  this.message    = message;\n  this.transition = transition;\n  this.from       = from;\n  this.to         = to;\n  this.current    = current;\n}\n\n\n/***/ })\n/******/ ]);\n});","interface Dataset {\n  [index: string]: StateMachine.StateMachineConfig;\n}\n\nconst dataset: Dataset = {\n  pointer: {\n    initial: 'created',\n    events: [\n      { name: 'initialize', from: 'created', to: 'idling' },\n      { name: 'start', from: 'idling', to: 'running' },\n      { name: 'end', from: 'running', to: 'idling' },\n    ],\n  },\n\n  target: {\n    initial: 'created',\n    events: [\n      { name: 'initialize', from: 'created', to: 'inactive' },\n      { name: 'activate', from: 'inactive', to: 'active' },\n      { name: 'inactivate', from: 'active', to: 'inactive' },\n    ],\n  },\n\n  media: {\n    initial: 'created',\n    events: [\n      { name: 'initialize', from: 'created', to: 'initialized' },\n      { name: 'ready', from: 'initialized', to: 'idling' },\n      { name: 'reset', from: ['idling', 'error'], to: 'initialized' },\n      { name: 'start', from: 'idling', to: 'running' },\n      { name: 'stop', from: 'running', to: 'idling' },\n      { name: 'pause', from: 'running', to: 'pending' },\n      { name: 'resume', from: 'pending', to: 'running' },\n      { name: 'quit', from: 'pending', to: 'idling' },\n      { name: 'abort', from: '*', to: 'error' },\n    ],\n  },\n};\n\nexport default dataset;\n","export default class EventType {\n  static readonly MouseDown = 'mousedown';\n\n  static readonly MouseUp = 'mouseup';\n\n  static readonly MouseMove = 'mousemove';\n\n  static readonly MouseEnter = 'mouseenter';\n\n  static readonly MouseLeave = 'mouseleave';\n\n  static readonly Click = 'click';\n\n  static readonly DoubleClick = 'dblclick';\n\n  static readonly ContextMenu = 'contextmenu';\n\n  static readonly TouchStart = 'touchstart';\n\n  static readonly TouchEnd = 'touchend';\n\n  static readonly TouchMove = 'touchmove';\n\n  static readonly TouchCancel = 'touchcancel';\n}\n","import * as JSM from 'javascript-state-machine';\nimport MouseHandler from './mouse-handler';\nimport TouchHandler from './touch-handler';\nimport Recorder from './recorder';\nimport dataset from './dataset';\nimport * as IRub from './interface';\n\ninterface Loop {\n  (ctime: number): void;\n}\n\nconst MIN_INTERVAL = 4;\nconst BOUNDS_ID = 'rb-bounds';\nconst { abs, max } = Math;\n\nfunction isTouchEnabled(): boolean {\n  return (\n    'ontouchstart' in window ||\n    navigator.maxTouchPoints > 0 ||\n    navigator.msMaxTouchPoints > 0\n  );\n}\n\nfunction getVelocity(dt: number, dx: number, dy: number): number {\n  if (dt > 0) {\n    return max(abs(dx / dt), abs(dy / dt));\n  }\n  return 0;\n}\n\nlet id = 0;\n\nfunction genId(): number {\n  id += 1;\n  return id;\n}\n\nexport default class Rub implements IRub.MainInterface {\n  private id: number;\n\n  private bounds: Map<IRub.BoundsType, IRub.Bounds> = new Map();\n\n  private currentBoundsType: IRub.BoundsType;\n\n  private inputId = 0;\n\n  private outputId = 0;\n\n  private loopCallbacks: IRub.LoopCallback[] = [];\n\n  private input: Loop;\n\n  private output: Loop;\n\n  private offset = 0;\n\n  private t0 = 0;\n\n  private x0 = 0;\n\n  private y0 = 0;\n\n  public event: IRub.PointerHandlerInterface;\n\n  public recorder: IRub.RecorderInterface;\n\n  public media: IRub.MediaStateMachine;\n\n  public constructor(\n    private container: HTMLDivElement,\n    callback?: IRub.LoopCallback | IRub.LoopCallback[]\n  ) {\n    this.id = genId();\n\n    const boundsContainer = this.container.querySelector(\n      `.${BOUNDS_ID}`\n    ) as HTMLDivElement;\n    const els = Array.from(boundsContainer.children) as HTMLDivElement[];\n\n    for (let i = 0, l = els.length; i < l; i += 1) {\n      const el = els[i];\n      const identifier = el.dataset.boundsType as IRub.BoundsType;\n\n      if (identifier == null) {\n        throw new Error('cannot find identified class name');\n      }\n\n      const targetEls =\n        el.childElementCount > 0 ? Array.from(el.children) : [el];\n\n      const Handler = !isTouchEnabled() ? MouseHandler : TouchHandler;\n\n      this.bounds.set(identifier, {\n        recorder: new Recorder(targetEls as HTMLDivElement[]),\n        event: new Handler(targetEls as HTMLDivElement[]),\n      });\n    }\n\n    const [key] = Array.from(this.bounds.keys());\n    const bounds = this.bounds.get(key) as IRub.Bounds;\n    this.currentBoundsType = key;\n    this.recorder = bounds.recorder;\n    this.event = bounds.event;\n    this.event.addListeners(this.container);\n\n    this.media = JSM.create(dataset.media) as IRub.MediaStateMachine;\n\n    if (callback != null) {\n      this.addLoopCallback(callback);\n    }\n\n    this.output = (): void => {\n      if (this.loopCallbacks.length > 0) {\n        const frames = this.recorder.getFrames();\n\n        for (let i = 0, l = this.loopCallbacks.length; i < l; i += 1) {\n          this.loopCallbacks[i](frames);\n        }\n      }\n\n      this.outputId = requestAnimationFrame(this.output);\n    };\n\n    this.input = (ctime: number): void => {\n      let velocity = 0;\n      let targetIndex = -1;\n\n      if (this.event.isAttached()) {\n        const count = this.event.getEventTrackCount();\n        if (count > this.offset) {\n          const track = this.event.getEventTrack();\n          const [t, x, y] = Array.from(track);\n\n          if (this.t0 > 0) {\n            const dt = t - this.t0;\n            const dx = x - this.x0;\n            const dy = y - this.y0;\n\n            if (dt > MIN_INTERVAL) {\n              velocity = getVelocity(dt, dx, dy);\n            }\n          }\n\n          this.t0 = t;\n          this.x0 = x;\n          this.y0 = y;\n\n          this.offset = count;\n        }\n\n        targetIndex = this.event.getActiveTargetIndex();\n      }\n\n      this.recorder.update(ctime, velocity, targetIndex);\n\n      this.inputId = requestAnimationFrame(this.input);\n    };\n  }\n\n  public getId(): number {\n    return this.id;\n  }\n\n  /*  */\n  public startLoop(): void {\n    this.inputId = requestAnimationFrame(this.input);\n    this.outputId = requestAnimationFrame(this.output);\n  }\n\n  /*  */\n  public stopLoop(): void {\n    this.recorder.suspend();\n\n    cancelAnimationFrame(this.inputId);\n    cancelAnimationFrame(this.outputId);\n  }\n\n  /*  */\n  public clearLoop(): void {\n    this.t0 = 0;\n    this.x0 = 0;\n    this.y0 = 0;\n    this.offset = 0;\n\n    this.resetBoundsType();\n  }\n\n  public getCurrentBoundsType(): IRub.BoundsType {\n    return this.currentBoundsType;\n  }\n\n  public setBoundsType(key: IRub.BoundsType): void {\n    const bounds = this.bounds.get(key);\n\n    if (bounds == null) {\n      throw new Error('this is assigned undefined');\n    }\n\n    this.currentBoundsType = key;\n\n    this.resetBoundsType();\n    this.removeEventHandler();\n\n    this.recorder = bounds.recorder;\n    this.event = bounds.event;\n    this.setEventHandler();\n  }\n\n  public setMediaCallback(callback: IRub.MediaStateCallback): void {\n    Object.assign(this.media, callback);\n  }\n\n  public addLoopCallback(\n    callback: IRub.LoopCallback | IRub.LoopCallback[]\n  ): void {\n    if (!Array.isArray(callback)) {\n      this.loopCallbacks.push(callback.bind(this));\n    } else {\n      for (let i = 0, l = callback.length; i < l; i += 1) {\n        this.loopCallbacks.push(callback[i].bind(this));\n      }\n    }\n  }\n\n  public clearLoopCallback(): void {\n    this.loopCallbacks.length = 0;\n  }\n\n  private setEventHandler(): void {\n    if (!this.event.isAttached()) {\n      this.event.addListeners(this.container);\n    }\n  }\n\n  private removeEventHandler(): void {\n    if (this.event.isAttached()) {\n      this.event.removeListeners(this.container);\n    }\n  }\n\n  private resetBoundsType(): void {\n    this.event.clearEventTracks();\n    this.recorder.resetFrames();\n  }\n}\n","import PointerHandler from './pointer-handler';\nimport EventType from './event-type';\nimport * as IRub from './interface';\n\nconst { documentElement } = document;\n\nexport default class MouseHandler extends PointerHandler {\n  public constructor(els: HTMLDivElement[]) {\n    super(els);\n\n    this.listener = {\n      start: MouseHandler.start.bind(this, this.state),\n      end: MouseHandler.end.bind(this, this.state),\n      move: MouseHandler.move.bind(this, this.state),\n      activate: MouseHandler.activate.bind(this),\n      inactivate: MouseHandler.inactivate.bind(this),\n    };\n  }\n\n  public addListeners(el: HTMLDivElement): void {\n    if (this.listener == null) {\n      return;\n    }\n\n    this.attached = true;\n\n    el.addEventListener(EventType.MouseDown, this.listener.start, false);\n    el.addEventListener(EventType.MouseMove, this.listener.move, false);\n    el.addEventListener(EventType.MouseUp, this.listener.end, false);\n\n    for (let i = 0, l = this.targets.length; i < l; i += 1) {\n      const target = this.targets[i];\n\n      target.el.addEventListener(\n        EventType.MouseEnter,\n        this.listener.activate,\n        false\n      );\n      target.el.addEventListener(\n        EventType.MouseLeave,\n        this.listener.inactivate,\n        false\n      );\n    }\n  }\n\n  public removeListeners(el: HTMLDivElement): void {\n    if (this.listener == null) {\n      return;\n    }\n\n    this.attached = false;\n\n    el.removeEventListener(EventType.MouseDown, this.listener.start, false);\n    el.removeEventListener(EventType.MouseMove, this.listener.move, false);\n    el.removeEventListener(EventType.MouseUp, this.listener.end, false);\n\n    for (let i = 0, l = this.targets.length; i < l; i += 1) {\n      const target = this.targets[i];\n\n      target.el.removeEventListener(\n        EventType.MouseEnter,\n        this.listener.activate,\n        false\n      );\n      target.el.removeEventListener(\n        EventType.MouseLeave,\n        this.listener.inactivate,\n        false\n      );\n    }\n  }\n\n  static start(\n    this: MouseHandler,\n    state: IRub.PointerStateMachine,\n    event: MouseEvent | TouchEvent\n  ): void {\n    if (!(event instanceof MouseEvent)) {\n      return;\n    }\n\n    if (state.current !== 'idling') {\n      return;\n    }\n\n    state.start();\n\n    const t = performance.now();\n\n    const rect: DOMRect = documentElement.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    this.coords.addTrack([t, x, y]);\n  }\n\n  static move(\n    this: MouseHandler,\n    state: IRub.PointerStateMachine,\n    event: MouseEvent | TouchEvent\n  ): void {\n    if (!(event instanceof MouseEvent)) {\n      return;\n    }\n\n    if (state.current !== 'running') {\n      return;\n    }\n\n    const t = performance.now();\n\n    const rect: DOMRect = documentElement.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    this.coords.addTrack([t, x, y]);\n  }\n\n  static end(\n    this: MouseHandler,\n    state: IRub.PointerStateMachine,\n    event: MouseEvent | TouchEvent\n  ): void {\n    if (!(event instanceof MouseEvent)) {\n      return;\n    }\n\n    if (state.current !== 'running') {\n      return;\n    }\n\n    const t = performance.now();\n\n    const rect: DOMRect = documentElement.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    this.coords.addTrack([t, x, y]);\n\n    state.end();\n  }\n\n  static activate(this: MouseHandler, event: MouseEvent | TouchEvent): void {\n    const index = this.findTargetIndex(\n      (t: IRub.TargetInterface): boolean =>\n        t.el === (event.target as HTMLDivElement)\n    );\n    const target = this.targets[index];\n\n    if (target == null) {\n      return;\n    }\n\n    if (target.state.current !== 'inactive') {\n      return;\n    }\n\n    target.state.activate();\n  }\n\n  static inactivate(this: MouseHandler, event: MouseEvent | TouchEvent): void {\n    const index = this.findTargetIndex(\n      (t: IRub.TargetInterface): boolean =>\n        t.el === (event.target as HTMLDivElement)\n    );\n    const target = this.targets[index];\n\n    if (target == null) {\n      return;\n    }\n\n    if (target.state.current !== 'active') {\n      return;\n    }\n\n    target.state.inactivate();\n  }\n}\n","import { StateMachine } from 'javascript-state-machine';\nimport Target from './target';\nimport Tracker from './tracker';\nimport dataset from './dataset';\nimport * as IRub from './interface';\n\nconst BLOCK_SIZE = 3; // [t, x, y]\nconst TRACK_SIZE = 900000; // (bytes)\n\nconst isActive = (target: IRub.TargetInterface): boolean => target.isActive();\n\nabstract class PointerHandler implements IRub.PointerHandlerInterface {\n  protected state: IRub.PointerStateMachine;\n\n  protected listener: IRub.ListenerInterface;\n\n  protected targets: IRub.TargetInterface[];\n\n  protected coords: IRub.TrackerInterface;\n\n  protected attached = false;\n\n  public constructor(els: HTMLDivElement[]) {\n    this.targets = els.map((el) => {\n      const target = new Target(el);\n      target.state.initialize();\n      return target;\n    });\n\n    this.state = StateMachine.create(\n      dataset.pointer\n    ) as IRub.PointerStateMachine;\n    this.state.initialize();\n\n    this.coords = new Tracker(TRACK_SIZE, BLOCK_SIZE);\n    this.listener = {};\n  }\n\n  protected findTargetIndex(\n    predicate: (target: IRub.TargetInterface) => boolean\n  ): number {\n    let result = -1;\n\n    for (let i = 0, l = this.targets.length; i < l; i += 1) {\n      const t = this.targets[i];\n\n      if (predicate(t)) {\n        result = i;\n        break;\n      }\n    }\n\n    return result;\n  }\n\n  public getActiveTargetIndex(): number {\n    const targetIndex = this.findTargetIndex(isActive);\n\n    return targetIndex;\n  }\n\n  public getEventTrackCount(): number {\n    return this.coords.count;\n  }\n\n  public getEventTrack(): Float32Array {\n    return this.coords.getTrack();\n  }\n\n  public clearEventTracks(): void {\n    return this.coords.clearTracks();\n  }\n\n  public isAttached(): boolean {\n    return this.attached;\n  }\n\n  public abstract addListeners(el: HTMLDivElement): void;\n\n  public abstract removeListeners(el: HTMLDivElement): void;\n}\n\nexport default PointerHandler;\n","import Tracker from './tracker';\nimport * as IRub from './interface';\n\nconst TRACK_SIZE = 216000;\nconst FPS = 60;\nconst PER_FRAME = 1000 / FPS;\n\nconst { round } = Math;\n\nexport default class Recorder implements IRub.RecorderInterface {\n  public record: IRub.Record;\n\n  private blockSize: number;\n\n  private frames = 0;\n\n  private started = false;\n\n  private elapsedTime = 0;\n\n  private lastTime = 0;\n\n  private template: number[];\n\n  private shiftedFrames: {\n    [P in IRub.RecordMode]: number;\n  };\n\n  public constructor(els: HTMLDivElement[]) {\n    const targetNum = els.length;\n\n    this.blockSize = targetNum + 1;\n\n    this.record = new Map([\n      ['live', this.createRecord()],\n      ['playback', this.createRecord()],\n      ['external', this.createRecord()],\n    ]);\n\n    this.shiftedFrames = {\n      live: 0,\n      playback: 0,\n      external: 0,\n    };\n\n    this.template = Array(targetNum + 1).fill(0);\n  }\n\n  public update(ctime: number, velocity: number, targetIndex: number): void {\n    const track = this.template.slice(0);\n    const liveTracker = this.record.get('live') as Tracker;\n\n    if (!this.started) {\n      this.started = true;\n      this.lastTime = ctime;\n\n      track[0] = this.frames;\n      liveTracker.setTrack(track, this.frames);\n    } else {\n      this.elapsedTime += ctime - this.lastTime;\n      this.lastTime = ctime;\n\n      const currentFrames = round(this.elapsedTime / PER_FRAME);\n\n      if (currentFrames > this.frames) {\n        this.frames = currentFrames;\n        track[0] = this.frames;\n\n        if (targetIndex > -1) {\n          track[targetIndex + 1] = velocity;\n        }\n\n        liveTracker.setTrack(track, this.frames);\n      }\n    }\n  }\n\n  private createRecord(): Tracker {\n    const tracker = new Tracker(TRACK_SIZE, this.blockSize);\n    tracker.writeFrames();\n    return tracker;\n  }\n\n  public getElapsedTime(): number {\n    return this.elapsedTime;\n  }\n\n  public getFrames(): number {\n    return this.frames;\n  }\n\n  public setFrames(frames: number): void {\n    const track = this.template.slice(0);\n    track[0] = frames;\n    (this.record.get('live') as Tracker).setTrack(track, frames);\n\n    const diff = frames - this.frames;\n    const shift = diff * PER_FRAME;\n    this.elapsedTime += shift;\n    this.frames = frames;\n  }\n\n  public suspend(): void {\n    this.started = false;\n  }\n\n  public resetFrames(): void {\n    this.frames = 0;\n    this.started = false;\n    this.lastTime = 0;\n    this.elapsedTime = 0;\n  }\n\n  public clearRecord(mode: IRub.RecordMode = 'live'): void {\n    (this.record.get(mode) as Tracker).writeFrames();\n  }\n\n  public getRecordCount(mode: IRub.RecordMode = 'live'): number {\n    return (this.record.get(mode) as Tracker).count;\n  }\n\n  public getVelocities(offset = -1, mode: IRub.RecordMode = 'live'): number[] {\n    const shifted = offset + this.shiftedFrames[mode];\n    const track = (this.record.get(mode) as Tracker).getTrack(shifted);\n    const velocities = Array.from(track.subarray(1));\n    return velocities;\n  }\n\n  public getRecord(mode: IRub.RecordMode = 'live'): Float32Array {\n    const tracker = this.record.get(mode) as Tracker;\n    return tracker.getTrack(0, tracker.size);\n  }\n\n  public setRecord(tracks: Float32Array, mode: IRub.RecordMode = 'live'): void {\n    (this.record.get(mode) as Tracker).setTrack(tracks);\n  }\n\n  public addData(data: number[]): void {\n    (this.record.get('live') as Tracker).addTrack(data);\n  }\n\n  public getData(\n    offset = -1,\n    count = 1,\n    mode: IRub.RecordMode = 'live'\n  ): Float32Array {\n    const shifted = offset + this.shiftedFrames[mode];\n    return (this.record.get(mode) as Tracker).getTrack(shifted, count);\n  }\n\n  public setData(\n    track: number[],\n    offset = 0,\n    mode: IRub.RecordMode = 'live'\n  ): void {\n    (this.record.get(mode) as Tracker).setTrack(track, offset);\n  }\n\n  public setShiftedFrames(\n    frames: number,\n    mode: IRub.RecordMode = 'live'\n  ): void {\n    this.shiftedFrames[mode] = frames;\n  }\n}\n","import { StateMachine } from 'javascript-state-machine';\nimport dataset from './dataset';\nimport * as IRub from './interface';\n\nexport default class Target implements IRub.TargetInterface {\n  public state: IRub.TargetStateMachine;\n\n  public constructor(public el: HTMLDivElement) {\n    this.state = StateMachine.create(dataset.target) as IRub.TargetStateMachine;\n  }\n\n  public isActive(): boolean {\n    return this.state.current === 'active';\n  }\n}\n","import PointerHandler from './pointer-handler';\nimport EventType from './event-type';\nimport * as IRub from './interface';\n\nconst { documentElement } = document;\n\nexport default class TouchHandler extends PointerHandler {\n  public constructor(els: HTMLDivElement[]) {\n    super(els);\n\n    this.listener = {\n      start: TouchHandler.start.bind(this, this.state),\n      move: TouchHandler.move.bind(this, this.state),\n      end: TouchHandler.end.bind(this, this.state),\n    };\n  }\n\n  public addListeners(el: HTMLDivElement): void {\n    if (this.listener == null) {\n      return;\n    }\n\n    if (this.attached) {\n      return;\n    }\n    this.attached = true;\n\n    el.addEventListener(EventType.TouchStart, this.listener.start, false);\n    el.addEventListener(EventType.TouchMove, this.listener.move, false);\n    el.addEventListener(EventType.TouchEnd, this.listener.end, false);\n    el.addEventListener(EventType.TouchCancel, this.listener.end, false);\n  }\n\n  public removeListeners(el: HTMLDivElement): void {\n    if (this.listener == null) {\n      return;\n    }\n\n    if (!this.attached) {\n      return;\n    }\n    this.attached = false;\n\n    el.removeEventListener(EventType.TouchStart, this.listener.start, false);\n    el.removeEventListener(EventType.TouchMove, this.listener.move, false);\n    el.removeEventListener(EventType.TouchEnd, this.listener.end, false);\n    el.removeEventListener(EventType.TouchCancel, this.listener.end, false);\n  }\n\n  static start(\n    this: TouchHandler,\n    state: IRub.PointerStateMachine,\n    event: MouseEvent | TouchEvent\n  ): void {\n    if (!(event instanceof TouchEvent)) {\n      return;\n    }\n\n    if (state.current !== 'idling') {\n      return;\n    }\n\n    state.start();\n\n    const t = performance.now();\n\n    const rect: DOMRect = documentElement.getBoundingClientRect();\n    const touch: Touch = Array.from(event.changedTouches)[0];\n    const x = touch.clientX - rect.left;\n    const y = touch.clientY - rect.top;\n\n    this.coords.addTrack([t, x, y]);\n  }\n\n  static move(\n    this: TouchHandler,\n    state: IRub.PointerStateMachine,\n    event: MouseEvent | TouchEvent\n  ): void {\n    if (!(event instanceof TouchEvent)) {\n      return;\n    }\n\n    if (state.current !== 'running') {\n      return;\n    }\n\n    const t = performance.now();\n\n    const rect: DOMRect = documentElement.getBoundingClientRect();\n    const touch: Touch = Array.from(event.changedTouches)[0];\n    const cx = touch.clientX;\n    const cy = touch.clientY;\n    const x = cx - rect.left;\n    const y = cy - rect.top;\n\n    for (let i = 0, l = this.targets.length; i < l; i += 1) {\n      const target = this.targets[i];\n      const trect: DOMRect = target.el.getBoundingClientRect();\n\n      const isActive =\n        cx >= trect.left &&\n        cx <= trect.left + trect.width &&\n        cy >= trect.top &&\n        cy <= trect.top + trect.height;\n\n      if (isActive) {\n        if (target.state.current !== 'active') {\n          target.state.activate();\n        }\n      } else if (target.state.current !== 'inactive') {\n        target.state.inactivate();\n      }\n    }\n\n    this.coords.addTrack([t, x, y]);\n  }\n\n  static end(\n    this: TouchHandler,\n    state: IRub.PointerStateMachine,\n    event: MouseEvent | TouchEvent\n  ): void {\n    if (!(event instanceof TouchEvent)) {\n      return;\n    }\n\n    if (state.current !== 'running') {\n      return;\n    }\n\n    const t = performance.now();\n\n    const rect: DOMRect = documentElement.getBoundingClientRect();\n    const touch: Touch = Array.from(event.changedTouches)[0];\n    const x = touch.clientX - rect.left;\n    const y = touch.clientY - rect.top;\n\n    this.coords.addTrack([t, x, y]);\n\n    state.end();\n  }\n}\n","import * as IRub from './interface';\n\nconst { floor } = Math;\n\nfunction SystemGetExecutedInLittleEndian(): boolean {\n  if (new Uint8Array(new Uint16Array([0x00ff]).buffer)[0]) {\n    return true;\n  }\n  return false;\n}\n\nexport default class Tracker implements IRub.TrackerInterface {\n  public readonly blockSize: number;\n\n  protected tracks: Float32Array;\n\n  protected end = 0;\n\n  public constructor(length: number, blockSize: number) {\n    this.blockSize = blockSize;\n\n    try {\n      this.tracks = new Float32Array(length * this.blockSize);\n    } catch (e) {\n      throw new Error('cannot allocate memory');\n    }\n\n    if (!SystemGetExecutedInLittleEndian()) {\n      throw new Error('required little endian system');\n    }\n  }\n\n  get count(): number {\n    return floor(this.end / this.blockSize);\n  }\n\n  get size(): number {\n    return floor(this.tracks.length / this.blockSize);\n  }\n\n  public setTrack(track: number[] | Float32Array, offset = 0): void {\n    if (track.length % this.blockSize !== 0) {\n      throw new Error('Track size not matched');\n    }\n\n    const position = offset * this.blockSize;\n    this.tracks.set(track, position);\n\n    if (position + track.length >= this.end) {\n      this.end = position + track.length;\n    }\n  }\n\n  /* addTrack(), getLastTrack()Recorder */\n  public addTrack(track: number[]): void {\n    if (track.length % this.blockSize !== 0) {\n      throw new Error('Track size not matched');\n    }\n\n    this.tracks.set(track, this.end);\n    this.end += track.length;\n  }\n\n  /*  */\n  public getTrack(offset = -1, count = 1): Float32Array {\n    const position =\n      offset < 0\n        ? (this.count + offset) * this.blockSize\n        : offset * this.blockSize;\n\n    const end = position + count * this.blockSize;\n    const track = this.tracks.subarray(position, end);\n\n    return track;\n  }\n\n  public clearTracks(): void {\n    this.end = 0;\n    this.tracks.fill(0);\n  }\n\n  public writeFrames(): void {\n    this.clearTracks();\n\n    for (let i = 0, l = this.tracks.length, count = 0; i < l; i += 1) {\n      if (i % this.blockSize === 0) {\n        this.tracks.set([count], i);\n        count += 1;\n      }\n    }\n  }\n\n  public static create(length: number, blockSize: number): Tracker {\n    return new Tracker(length, blockSize);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./src/index.ts\");\n"],"sourceRoot":""}